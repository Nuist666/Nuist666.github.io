<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Nuist666的个人博客</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Nuist666的个人博客">
<meta property="og:url" content="https://nuist666.github.io/page/7/index.html">
<meta property="og:site_name" content="Nuist666的个人博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Nuist666">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Nuist666的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  

  
<script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>

  
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>


  
<meta name="generator" content="Hexo 7.1.1"></head>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
				<img lazy-src="/img/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
			<h1 class="header-author"><a href="/">Nuist666</a></h1>
		</hgroup>

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="half-header-menu">
						<a class="hide">Home</a>
						<a>Tags</a>
						<a>Links</a>
						<a>About</a>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Nuist666" title="github">github</a>
					        
								<a class="mail" target="_blank" href="mailto:yzwangkaicheng@gmail.com" title="mail">mail</a>
					        
								<a class="weibo" target="_blank" href="https://weibo.com/u/5586096129" title="weibo">weibo</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/nuist_666" title="twitter">twitter</a>
					        
						</div>
						<!-- music -->
						
							<!-- <div style="position: absolute; bottom: 120px; left: auto; width: 85%;"> -->
							<div style="position: absolute; left: auto; width: 85%;">
								<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=220 height=86 src="//music.163.com/outchain/player?type=2&id=28411862&auto=1&height=66"></iframe>
							</div>
						
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Overflow-Mirai-LLOneBot-OneBot/" style="font-size: 10px;">Overflow,Mirai,LLOneBot,OneBot</a> <a href="/tags/python-%E6%B0%94%E8%B1%A1%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/" style="font-size: 20px;">python,气象信息系统工程</a> <a href="/tags/%E5%8D%8E%E4%B8%BA%E4%BA%91-%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-Hexo/" style="font-size: 10px;">华为云,个人博客,Hexo</a> <a href="/tags/%E6%A8%A1%E6%9D%BF-%E5%B0%8F%E4%B9%A6%E5%8C%A0-%E4%B8%89%E5%B3%B0%E7%9C%9F%E7%99%BD-%E6%96%B0%E5%BB%BA/" style="font-size: 10px;">模板,小书匠,三峰真白,新建</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://qm.qq.com/q/HrJvHGMzek">qq</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://space.bilibili.com/3546647772531174">bilibili</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">I&#39;m a student in NUIST.</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide"></h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/avatar.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author"></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Nuist666" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto:yzwangkaicheng@gmail.com" title="mail">mail</a>
			        
						<a class="weibo" target="_blank" href="https://weibo.com/u/5586096129" title="weibo">weibo</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/nuist_666" title="twitter">twitter</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-第八章" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2000/01/01/%E7%AC%AC%E5%85%AB%E7%AB%A0/" class="article-date">
  	<time datetime="1999-12-31T16:08:00.000Z" itemprop="datePublished">2000-01-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2000/01/01/%E7%AC%AC%E5%85%AB%E7%AB%A0/">
        python气象信息系统工程 第八章
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第8章-Python绘图基础"><a href="#第8章-Python绘图基础" class="headerlink" title="第8章 Python绘图基础"></a>第8章 Python绘图基础</h1><h2 id="8-1-Matplotlib与cartopy基础知识"><a href="#8-1-Matplotlib与cartopy基础知识" class="headerlink" title="8.1  Matplotlib与cartopy基础知识"></a>8.1  Matplotlib与cartopy基础知识</h2><h3 id="8-1-1-绘图结构"><a href="#8-1-1-绘图结构" class="headerlink" title="8.1.1  绘图结构"></a>8.1.1  绘图结构</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 引入绘图库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># 绘图数据计算函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> np.exp(-t) * np.cos(<span class="number">2</span>*np.pi*t)</span><br><span class="line"><span class="comment"># 生成两个子图对应的横轴数据</span></span><br><span class="line">t1 = np.arange(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">0.1</span>)</span><br><span class="line">t2 = np.arange(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">0.02</span>)</span><br><span class="line"><span class="comment"># 生成figure</span></span><br><span class="line">plt.figure(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 生成子图1(位置为两行一列排布的从上往下数第一个)</span></span><br><span class="line">plt.subplot(<span class="number">211</span>)</span><br><span class="line">plt.plot(t1, f(t1), <span class="string">&#x27;bo&#x27;</span>, t2, f(t2), <span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"><span class="comment"># 生成子图2(位置为两行一列排布的从上往下数第二个)</span></span><br><span class="line">plt.subplot(<span class="number">212</span>)</span><br><span class="line">plt.plot(t2, np.cos(<span class="number">2</span>*np.pi*t2), <span class="string">&#x27;r--&#x27;</span>)</span><br><span class="line"><span class="comment"># 进行绘图</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/D92820183EE34C5E83ACA39A6919DFF8/rpavgo3zph.png">


<h3 id="8-1-2-Figure、Axes与GeoAxes"><a href="#8-1-2-Figure、Axes与GeoAxes" class="headerlink" title="8.1.2  Figure、Axes与GeoAxes"></a>8.1.2  Figure、Axes与GeoAxes</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">fig=plt.figure(figsize=(<span class="number">12</span>,<span class="number">6</span>))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    ax=fig.add_subplot(<span class="number">2</span>,<span class="number">3</span>,i+<span class="number">1</span>)</span><br><span class="line">    ax.text(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="string">f&#x27;<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>&#x27;</span>, fontsize=<span class="number">20</span>,ha=<span class="string">&#x27;center&#x27;</span>,va=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line">    ax.text(<span class="number">0.5</span>,<span class="number">0.2</span>,<span class="string">f&#x27;ax=fig.add_subplot(2,3,<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>)&#x27;</span>, fontsize=<span class="number">10</span>,ha=<span class="string">&#x27;center&#x27;</span>,va=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line">ax = fig.add_axes([<span class="number">0.3</span>, <span class="number">0.35</span>, <span class="number">0.3</span>, <span class="number">0.2</span>])</span><br><span class="line">ax.text(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="string">&#x27;ax=fig.add_axes([0.3, 0.35, 0.2, 0.2])&#x27;</span>, fontsize=<span class="number">10</span>, ha=<span class="string">&#x27;center&#x27;</span>, va=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"><span class="comment"># 这里的[0.3, 0.35, 0.2, 0.2]指Axes的左轴距离左边界0.3个Figure的宽度，</span></span><br><span class="line"><span class="comment"># 下轴距离下边界0.35个Figure的高度，Axes宽度为0.2个Figure的宽度，</span></span><br><span class="line"><span class="comment"># Axes的高度为0.2个Figure的高度</span></span><br><span class="line">fig.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/649A3697B961466492E6A87178302DF2/rpavgo6jlj.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xarray <span class="keyword">as</span> xr</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line">f = xr.open_dataset(<span class="string">&#x27;/home/mw/input/pythonbook9857/1980060106.nc&#x27;</span>)</span><br><span class="line">z = f[<span class="string">&#x27;z&#x27;</span>].loc[:,<span class="number">500</span>,:,:][<span class="number">0</span>] <span class="comment">#取出第一个时刻的500hPa的位势场</span></span><br><span class="line">lat = f[<span class="string">&#x27;latitude&#x27;</span>]</span><br><span class="line">lon = f[<span class="string">&#x27;longitude&#x27;</span>]</span><br><span class="line">plt.figure(figsize=(<span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line"><span class="comment">#ax1为Axes</span></span><br><span class="line">ax1 = plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">c1 = ax1.contour(lon, lat, z)</span><br><span class="line">ax1.set_title(<span class="string">&#x27;Axes&#x27;</span>)</span><br><span class="line"><span class="comment">#ax2为GeoAxes</span></span><br><span class="line">ax2 = plt.subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>, projection=ccrs.PlateCarree())</span><br><span class="line">c2 = ax2.contour(lon, lat, z,transform=ccrs.PlateCarree())</span><br><span class="line">ax2.set_title(<span class="string">&#x27;GeoAxes&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>Warning: ecCodes 2.21.0 or higher is recommended. You are running version 2.14.1





Text(0.5, 1.0, &#39;GeoAxes&#39;)
</code></pre>
<img src="https://cdn.kesci.com/upload/rt/6DA246BD978B4D7C8F876DBD5C423725/rpavgr6skv.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xarray <span class="keyword">as</span> xr</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line"><span class="keyword">import</span> cartopy.mpl.ticker <span class="keyword">as</span> cticker</span><br><span class="line"></span><br><span class="line">f = xr.open_dataset(<span class="string">&#x27;/home/mw/input/pythonbook9857/1980060106.nc&#x27;</span>)</span><br><span class="line">z = f[<span class="string">&#x27;z&#x27;</span>].loc[:,<span class="number">500</span>,:,:][<span class="number">0</span>]</span><br><span class="line">lat = f[<span class="string">&#x27;latitude&#x27;</span>]</span><br><span class="line">lon = f[<span class="string">&#x27;longitude&#x27;</span>]</span><br><span class="line">plt.figure(figsize=(<span class="number">8</span>, <span class="number">6</span>))</span><br><span class="line">ax1 = plt.subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>, projection=ccrs.PlateCarree())</span><br><span class="line">ax1.set_extent([<span class="number">60</span>,<span class="number">180</span>,<span class="number">0</span>,<span class="number">90</span>]) <span class="comment">#设置GeoAxes的范围，4个数字分别代表左、右、上、下边界的经纬度</span></span><br><span class="line">ax1.gridlines() <span class="comment">#添加栅格线</span></span><br><span class="line"><span class="comment">#ax1.coastlines() #添加海岸线</span></span><br><span class="line"><span class="comment">#ax1.add_feature(cfeature.LAND) #添加大陆特征</span></span><br><span class="line"><span class="comment">#添加刻度</span></span><br><span class="line">ax1.set_xticks(np.arange(<span class="number">60</span>,<span class="number">210</span>,<span class="number">30</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax1.set_yticks(np.arange(<span class="number">0</span>,<span class="number">120</span>,<span class="number">30</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax1.xaxis.set_major_formatter(cticker.LongitudeFormatter())</span><br><span class="line">ax1.yaxis.set_major_formatter(cticker.LatitudeFormatter())</span><br><span class="line"><span class="comment">#绘制等值线</span></span><br><span class="line">c1 = ax1.contour(lon, lat, z,transform=ccrs.PlateCarree())</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/4E071F1343EB4B50B2CF24BF24D86199/rpavgr64v9.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">10</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>,projection=ccrs.PlateCarree())</span><br><span class="line">ax1.set_xticks(np.arange(-<span class="number">180</span>,<span class="number">240</span>,<span class="number">60</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax1.set_yticks(np.arange(-<span class="number">90</span>,<span class="number">120</span>,<span class="number">30</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax1.xaxis.set_major_formatter(cticker.LongitudeFormatter())</span><br><span class="line">ax1.yaxis.set_major_formatter(cticker.LatitudeFormatter())</span><br><span class="line">ax1.gridlines() <span class="comment">#添加栅格线</span></span><br><span class="line"><span class="comment"># ax1.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">ax2 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, projection=ccrs.PlateCarree(central_longitude = <span class="number">120</span>))</span><br><span class="line">ax2.set_xticks(np.arange(-<span class="number">180</span>,<span class="number">240</span>,<span class="number">60</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax2.set_yticks(np.arange(-<span class="number">90</span>,<span class="number">120</span>,<span class="number">30</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax2.xaxis.set_major_formatter(cticker.LongitudeFormatter())</span><br><span class="line">ax2.yaxis.set_major_formatter(cticker.LatitudeFormatter())</span><br><span class="line">ax2.gridlines() <span class="comment">#添加栅格线</span></span><br><span class="line"><span class="comment"># ax2.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/2E843E718C044F8388DD8C0D9D829859/rpavgrfj61.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">10</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, projection=ccrs.LambertConformal())</span><br><span class="line">gl1 = ax1.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">False</span>) <span class="comment">#添加栅格线，绘制刻度标签，但禁止在栅格线内绘制标签</span></span><br><span class="line">gl1.rotate_labels = <span class="literal">False</span> <span class="comment">#禁止刻度标签旋转</span></span><br><span class="line"><span class="comment"># ax1.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">ax2 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, projection=ccrs.LambertConformal(central_longitude=<span class="number">120</span>,cutoff=<span class="number">0</span>))</span><br><span class="line">gl2 = ax2.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">False</span>) <span class="comment">#添加栅格线</span></span><br><span class="line">gl2.rotate_labels = <span class="literal">False</span></span><br><span class="line"><span class="comment"># ax2.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/A6279A52D0F846B088363B12BF456870/rpavgssjt1.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">10</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, projection=ccrs.Mercator())</span><br><span class="line"><span class="comment"># ax1.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">gl1 = ax1.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">False</span>) <span class="comment">#添加栅格线</span></span><br><span class="line"><span class="comment">#隐藏上、右坐标轴刻度</span></span><br><span class="line">gl1.xlabels_top = <span class="literal">False</span></span><br><span class="line">gl1.ylabels_right = <span class="literal">False</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>/opt/conda/lib/python3.7/site-packages/cartopy/mpl/gridliner.py:307: UserWarning: The .xlabels_top attribute is deprecated. Please use .top_labels to toggle visibility instead.
  warnings.warn(&#39;The .xlabels_top attribute is deprecated. Please &#39;
/opt/conda/lib/python3.7/site-packages/cartopy/mpl/gridliner.py:343: UserWarning: The .ylabels_right attribute is deprecated. Please use .right_labels to toggle visibility instead.
  warnings.warn(&#39;The .ylabels_right attribute is deprecated. Please &#39;
</code></pre>
<img src="https://cdn.kesci.com/upload/rt/C2110A1F61F34892807B094B1230CC30/rpavgsuxtv.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">10</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, projection=ccrs.NorthPolarStereo())</span><br><span class="line"><span class="comment"># ax1.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">gl1 = ax1.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">True</span>) <span class="comment">#添加栅格线</span></span><br><span class="line">ax2 = fig.add_subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, projection=ccrs.SouthPolarStereo())</span><br><span class="line"><span class="comment"># ax2.add_feature(cfeature.COASTLINE.with_scale(&#x27;110m&#x27;))</span></span><br><span class="line">gl2 = ax2.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">True</span>) <span class="comment">#添加栅格线</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/0C7E3D3444F048158950FF7DEF26C731/rpavgtbenf.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.path <span class="keyword">as</span> mpath</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">5</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, projection=ccrs.NorthPolarStereo())</span><br><span class="line">ax1.set_extent([-<span class="number">180</span>, <span class="number">180</span>, <span class="number">30</span>, <span class="number">90</span>], ccrs.PlateCarree())</span><br><span class="line">gl1 = ax1.gridlines(draw_labels=<span class="literal">True</span>,x_inline=<span class="literal">False</span>, y_inline=<span class="literal">False</span>) <span class="comment">#添加栅格线</span></span><br><span class="line">gl1.rotate_labels = <span class="literal">False</span> <span class="comment">#禁止标签旋转，设置为True时标签与栅格线平行</span></span><br><span class="line"><span class="comment"># ax1.add_feature(cfeature.COASTLINE.with_scale(&#x27;50m&#x27;))</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/B4DA4B9D7F294FC79774E02368EB3774/rpavgu58pj.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.path <span class="keyword">as</span> mpath</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.feature <span class="keyword">as</span> cfeature</span><br><span class="line">fig = plt.figure(figsize=[<span class="number">5</span>, <span class="number">5</span>])</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, projection=ccrs.NorthPolarStereo())</span><br><span class="line">ax1.set_extent([-<span class="number">180</span>, <span class="number">180</span>, <span class="number">30</span>, <span class="number">90</span>], ccrs.PlateCarree())</span><br><span class="line">ax1.gridlines()</span><br><span class="line">ax1.add_feature(cfeature.COASTLINE.with_scale(<span class="string">&#x27;50m&#x27;</span>))</span><br><span class="line"><span class="comment"># 生成一个圆形的Path</span></span><br><span class="line">theta = np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, <span class="number">100</span>)</span><br><span class="line">center, radius = [<span class="number">0.5</span>, <span class="number">0.5</span>], <span class="number">0.5</span></span><br><span class="line">verts = np.vstack([np.sin(theta), np.cos(theta)]).T</span><br><span class="line">circle = mpath.Path(verts * radius + center)</span><br><span class="line"><span class="comment"># 将该Path设置为GeoAxes的边界</span></span><br><span class="line">ax1.set_boundary(circle, transform=ax1.transAxes)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>/opt/conda/lib/python3.7/site-packages/cartopy/io/__init__.py:260: DownloadWarning: Downloading: https://naciscdn.org/naturalearth/50m/physical/ne_50m_coastline.zip
  warnings.warn(&#39;Downloading: &#123;&#125;&#39;.format(url), DownloadWarning)
</code></pre>
<img src="https://cdn.kesci.com/upload/rt/A5A0CA10F87E4766841BB09EC55D9BAB/rpavgx4tex.png">


<h2 id="8-2-地理绘图基础"><a href="#8-2-地理绘图基础" class="headerlink" title="8.2  地理绘图基础"></a>8.2  地理绘图基础</h2><h3 id="8-2-2-在GeoAxes上绘制"><a href="#8-2-2-在GeoAxes上绘制" class="headerlink" title="8.2.2  在GeoAxes上绘制"></a>8.2.2  在GeoAxes上绘制</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.mpl.ticker <span class="keyword">as</span> cticker</span><br><span class="line"><span class="keyword">import</span> geopandas <span class="keyword">as</span> gpd</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> geopandas <span class="keyword">as</span> gpd</span><br><span class="line">gdf = gpd.GeoDataFrame.from_file(<span class="string">&#x27;/home/mw/input/pythonbook9857/circle.json&#x27;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, projection=ccrs.PlateCarree())</span><br><span class="line">ax.set_extent([<span class="number">115.5</span>, <span class="number">123</span>, <span class="number">29.5</span>, <span class="number">36.5</span>], ccrs.PlateCarree())</span><br><span class="line">ax.add_geometries(gdf[<span class="string">&#x27;geometry&#x27;</span>], crs=ccrs.PlateCarree(), facecolor=<span class="string">&#x27;none&#x27;</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"><span class="comment"># 设置轴刻度</span></span><br><span class="line">ax.set_xticks(np.arange(<span class="number">116</span>, <span class="number">123</span>, <span class="number">1</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax.set_yticks(np.arange(<span class="number">30</span>, <span class="number">36</span>, <span class="number">1</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax.xaxis.set_major_formatter(cticker.LongitudeFormatter())</span><br><span class="line">ax.yaxis.set_major_formatter(cticker.LatitudeFormatter())</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/0F00169EE67048539D6F7DB0D07FE45E/rpavgy4cri.png">


<h3 id="8-2-3-几何数据筛选示例"><a href="#8-2-3-几何数据筛选示例" class="headerlink" title="8.2.3  几何数据筛选示例"></a>8.2.3  几何数据筛选示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="keyword">import</span> cartopy.mpl.ticker <span class="keyword">as</span> cticker</span><br><span class="line"><span class="keyword">import</span> geopandas <span class="keyword">as</span> gpd</span><br><span class="line"></span><br><span class="line">name_a = gdf.loc[gdf[<span class="string">&#x27;name&#x27;</span>]==<span class="string">&#x27;A&#x27;</span>]</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">8</span>))</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, projection=ccrs.PlateCarree())</span><br><span class="line">ax.set_extent([<span class="number">115.5</span>, <span class="number">123</span>, <span class="number">29.5</span>, <span class="number">36.5</span>], ccrs.PlateCarree())</span><br><span class="line">ax.add_geometries(name_a[<span class="string">&#x27;geometry&#x27;</span>], crs=ccrs.PlateCarree(), facecolor=<span class="string">&#x27;none&#x27;</span>, edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"><span class="comment"># 设置轴刻度</span></span><br><span class="line">ax.set_xticks(np.arange(<span class="number">116</span>, <span class="number">123</span>, <span class="number">1</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax.set_yticks(np.arange(<span class="number">30</span>, <span class="number">36</span>, <span class="number">1</span>), crs=ccrs.PlateCarree())</span><br><span class="line">ax.xaxis.set_major_formatter(cticker.LongitudeFormatter())</span><br><span class="line">ax.yaxis.set_major_formatter(cticker.LatitudeFormatter())</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/78FDB5B489DF46048EF3712389754E89/rpavgy9nrw.png">


<h3 id="8-2-4-多边形合并"><a href="#8-2-4-多边形合并" class="headerlink" title="8.2.4  多边形合并"></a>8.2.4  多边形合并</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> shapely.ops <span class="keyword">import</span> unary_union</span><br><span class="line"><span class="keyword">import</span> geopandas <span class="keyword">as</span> gpd</span><br><span class="line"><span class="keyword">import</span> cartopy.crs <span class="keyword">as</span> ccrs</span><br><span class="line"><span class="comment"># 读取GeoJSON文件</span></span><br><span class="line">gdf = gpd.GeoDataFrame.from_file(<span class="string">&#x27;/home/mw/input/pythonbook9857/circle.json&#x27;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>) <span class="comment">#也可以是shapefile</span></span><br><span class="line"><span class="comment"># 合并多边形</span></span><br><span class="line">geom = unary_union([geom <span class="keyword">if</span> geom.is_valid <span class="keyword">else</span> geom.buffer(<span class="number">0</span>) <span class="keyword">for</span> geom <span class="keyword">in</span> gdf[<span class="string">&#x27;geometry&#x27;</span>]])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(gdf[<span class="string">&#x27;geometry&#x27;</span>]), <span class="built_in">len</span>(gdf[<span class="string">&#x27;geometry&#x27;</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(geom))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;geopandas.geoseries.GeoSeries&#39;&gt; 2
&lt;class &#39;shapely.geometry.polygon.Polygon&#39;&gt;
</code></pre>
<h2 id="8-3-颜色表（colormap）"><a href="#8-3-颜色表（colormap）" class="headerlink" title="8.3  颜色表（colormap）"></a>8.3  颜色表（colormap）</h2><h3 id="8-3-3-创建自定义色标"><a href="#8-3-3-创建自定义色标" class="headerlink" title="8.3.3  创建自定义色标"></a>8.3.3  创建自定义色标</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.colors <span class="keyword">as</span> mcolors</span><br><span class="line"><span class="comment"># 样例数据生成，此段可以忽略</span></span><br><span class="line">N = <span class="number">100</span></span><br><span class="line">X, Y = np.mgrid[-<span class="number">3</span>:<span class="number">3</span>:<span class="built_in">complex</span>(<span class="number">0</span>, N), -<span class="number">2</span>:<span class="number">2</span>:<span class="built_in">complex</span>(<span class="number">0</span>, N)]</span><br><span class="line">Z1 = np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line">Z2 = np.exp(-(X - <span class="number">1</span>)**<span class="number">2</span> - (Y - <span class="number">1</span>)**<span class="number">2</span>)</span><br><span class="line">Z = (Z1 - Z2) * <span class="number">2</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">levels = [<span class="number">0.1</span>, <span class="number">0.3</span>, <span class="number">0.5</span>, <span class="number">0.9</span>]</span><br><span class="line">cmap = mcolors.ListedColormap([<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">cmap.set_under(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">cmap.set_over(<span class="string">&#x27;m&#x27;</span>)</span><br><span class="line">norm = mcolors.BoundaryNorm(levels, cmap.N)</span><br><span class="line">pcm = ax.contourf(Z, levels=levels, cmap=cmap, norm=norm, extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">fig.colorbar(pcm, ax=ax, extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/6F08DDA970DC475BA6E635C95780EA49/rpavgygcdi.png">



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.colors <span class="keyword">as</span> mcolors</span><br><span class="line">N = <span class="number">100</span></span><br><span class="line">X, Y = np.mgrid[-<span class="number">3</span>:<span class="number">3</span>:<span class="built_in">complex</span>(<span class="number">0</span>, N), -<span class="number">2</span>:<span class="number">2</span>:<span class="built_in">complex</span>(<span class="number">0</span>, N)]</span><br><span class="line">Z1 = np.exp(-X**<span class="number">2</span> - Y**<span class="number">2</span>)</span><br><span class="line">Z2 = np.exp(-(X - <span class="number">1</span>)**<span class="number">2</span> - (Y - <span class="number">1</span>)**<span class="number">2</span>)</span><br><span class="line">Z = (Z1 - Z2) * <span class="number">2</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">levels = [<span class="number">0.1</span>, <span class="number">0.3</span>, <span class="number">0.5</span>, <span class="number">0.9</span>]</span><br><span class="line">cmap, norm = mcolors.from_levels_and_colors(levels, [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;m&#x27;</span>], <span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">pcm = ax.contourf(Z, levels=levels, cmap=cmap, norm=norm, extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">fig.colorbar(pcm, ax=ax, extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/A95D99C240E84B6CACFDBBAFEDBB0A2D/rpavgyyuvj.png">


<h2 id="8-4-图像显示与保存"><a href="#8-4-图像显示与保存" class="headerlink" title="8.4  图像显示与保存"></a>8.4  图像显示与保存</h2><h3 id="8-4-1-图像显示"><a href="#8-4-1-图像显示" class="headerlink" title="8.4.1  图像显示"></a>8.4.1  图像显示</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#生成正弦函数</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"><span class="comment">#绘制图像</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">ax1.plot(x, y)</span><br><span class="line"><span class="comment">#显示图像</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/FCE803DBA0CD4BCC8A5F89ED917132A4/rpavgyf04q.png">


<h3 id="8-4-2-图像保存"><a href="#8-4-2-图像保存" class="headerlink" title="8.4.2  图像保存"></a>8.4.2  图像保存</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#生成正弦函数</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line"><span class="comment">#绘制图像</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">ax1.plot(x, y)</span><br><span class="line">plt.savefig(<span class="string">&#x27;./sinx.png&#x27;</span>, dpi=<span class="number">400</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br></pre></td></tr></table></figure>


<img src="https://cdn.kesci.com/upload/rt/BA2FD94A4B1D401584F8DD1D85C585F5/rpavgzi8wm.png">


      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python-%E6%B0%94%E8%B1%A1%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/" rel="tag">python,气象信息系统工程</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/%E5%B0%8F%E4%B9%A6%E5%8C%A0-python/">/小书匠/python</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2024 Nuist666
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/preccrep/hexo-theme-jelly" target="_blank">Jelly</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">



<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>

<script src="/js/main.js"></script>




  </div>
</body>
</html>